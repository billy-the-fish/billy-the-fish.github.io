<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://miro.com/app/static/sdk.1.1.js"></script>
    <script>
    miro.onReady(() => {
      miro.initialize({
        extensionPoints: {
          bottomBar: {
            title: 'Miro writing test',
            // Add a rectangular button to the bottom bar in your devteam whiteboards
            svgIcon: '<rect x="0" y="0" width="24" height="24" fill="currentColor" />',
            onClick: () => {
                const viewport = miro.board.viewport.get()

                // Calculate the center of the visible view
                const centeredX = viewport.x + viewport.width / 2
                const centeredY = viewport.y + viewport.height / 2

                // Retrieve today's date.
                var today = new Date()
                var dd = String(today.getDate()).padStart(2, '0');
                var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
                var yyyy = today.getFullYear();
                today = mm + '/' + dd + '/' + yyyy;

                // Create a sticker in the center of the current view/
                miro.board.widgets.create({type: "sticker", text: today, x:centeredX, y:centeredY})
            }
          }
        }
      })
    })
    </script>
</head>
</html>
